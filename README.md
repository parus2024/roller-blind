# Smart-Roller-Blind: –£–º–Ω–∞—è –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è –†–æ–ª–ª–µ—Ç–∞ –Ω–∞ ESPHome

![ESPHome Logo](roller-blind-img/esphome1.png) ![Home Assistant Logo](https://avatars.githubusercontent.com/u/13844975?s=200&v=4)
<p align="center">
    <img alt="Static Badge" src="https://img.shields.io/badge/made%20by-ParusSmartHome-blue">
    <img alt="Static Badge" src="https://img.shields.io/badge/version-v2.0%20Beta-green">
    <img alt="Static Badge" src="https://img.shields.io/badge/esphome min version-2025.7.5-red">
    <img alt="Static Badge" src="https://img.shields.io/badge/license-MIT-orange">
</p>
## üåü –û–ø–∏—Å–∞–Ω–∏–µ –ü—Ä–æ–µ–∫—Ç–∞

**Smart-Roller-Blind** ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª–ª–µ—Ç–∞–º–∏ (—à—Ç–æ—Ä–∞–º–∏), –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ –±–∞–∑–µ ESPHome –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å Home Assistant. –ü—Ä–æ–µ–∫—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –≤—Ä—É—á–Ω—É—é —É–ø—Ä–∞–≤–ª—è—Ç—å —à—Ç–æ—Ä–æ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫, –ø–æ–ª–æ–∂–µ–Ω–∏—è —Å–æ–ª–Ω—Ü–∞ –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞—é—â–µ–≥–æ —Ä–µ–∂–∏–º–∞ –≥–ª—É–±–æ–∫–æ–≥–æ —Å–Ω–∞. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —É–º–Ω–æ–≥–æ –¥–æ–º–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∫–æ–º—Ñ–æ—Ä—Ç, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å. –ë–µ–∑ –ø–æ–¥–∑–∞—Ä—è–¥–∫–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω—É—é —Ä–∞–±–æ—Ç—É 1-2 –º–µ—Å—è—Ü–∞ –ø—Ä–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏. –ü—Ä–∏ –∑–∞–º–µ–Ω–µ —à–∞–≥–æ–≤–æ–≥–æ –¥–≤–∏–≥–∞—Ç–µ–ª—è —Å –¥—Ä–∞–π–≤–µ—Ä–æ–º –Ω–∞ –±–æ–ª–µ–µ –º–æ—â–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–ø–æ—Å–æ–±–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç—è–∂–µ–ª—ã–º–∏ —à—Ç–æ—Ä–∞–º–∏. 

–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –®—Ç–æ—Ä–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–≤–≤–æ–¥ –≤—Ä–µ–º–µ–Ω–∏) –∏–ª–∏ –ø–æ –ø–æ–ª–æ–∂–µ–Ω–∏—é —Å–æ–ª–Ω—Ü–∞ (–≤–æ—Å—Ö–æ–¥/–∑–∞–∫–∞—Ç), –≤—Å–µ–≥–¥–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—è –Ω—É–∂–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
- **–†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ß–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É, –ò–ö-–ø—É–ª—å—Ç, Home Assistant, –Ø–Ω–¥–µ–∫—Å (–ê–ª–∏—Å–∞), Web —Å—Ç—Ä–∞–Ω–∏—Ü–∞.
- **–≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ**: –ì–ª—É–±–æ–∫–∏–π —Å–æ–Ω ESP32-C3 —Å –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ–º –ø–æ —Ç–∞–π–º–µ—Ä—É –∏–ª–∏ –∫–Ω–æ–ø–∫–µ.
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å –æ—Ç –ø–µ—Ä–µ–≥—Ä–µ–≤–∞ –º–æ—Ç–æ—Ä–∞ –∏ —Ç–∞–π–º-–∞—É—Ç–æ–≤.
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: OLED-–¥–∏—Å–ø–ª–µ–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å, –±–∞—Ç–∞—Ä–µ—é, –≤—Ä–µ–º—è –∏ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è.
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Home Assistant –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

–ü—Ä–æ–µ–∫—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ ESP32-C3 (–∏–ª–∏ –ª—é–±–æ–π ESP32), —à–∞–≥–æ–≤–æ–º –¥–≤–∏–≥–∞—Ç–µ–ª–µ —Å –¥—Ä–∞–π–≤–µ—Ä–æ–º A4988 –∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–µ–Ω—Å–æ—Ä–∞—Ö. –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ ESPHome YAML —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º substitutions –¥–ª—è –≥–∏–±–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

---

## üöÄ –ö–ª—é—á–µ–≤—ã–µ –§—É–Ω–∫—Ü–∏–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- **–†–µ–∂–∏–º "–°–æ–ª–Ω—Ü–µ"**: –®—Ç–æ—Ä–∞ —Ä–∞–±–æ—Ä–∞–µ—Ç –ø–æ –≤–æ—Å—Ö–æ–¥—É –∏ –∑–∞–∫–∞—Ç—É (—Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –æ—Ñ—Ñ—Å–µ—Ç–æ–º —É–≥–ª–∞ —Å–æ–ª–Ω—Ü–∞).
- **–†–µ–∂–∏–º "–í—Ä–µ–º—è"**: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º–æ–µ –≤—Ä–µ–º—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –∑–∞–∫—Ä—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 07:00‚Äì18:00).
- **–ê–≤—Ç–æ/–†—É—á–Ω–æ–π —Ä–µ–∂–∏–º**: –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –í —Ä—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç —à—Ç–æ—Ä–æ–π —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–∏ –ø–æ —Ç–∞–π–º–µ—Ä—É.
- **–ì–ª—É–±–æ–∫–∏–π —Å–æ–Ω**: ESP32 –∑–∞—Å—ã–ø–∞–µ—Ç –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–±—ã—Ç–∏—è, —ç–∫–æ–Ω–æ–º—è –±–∞—Ç–∞—Ä–µ—é.
- **–ê–≤—Ç–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏—è**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –ø–æ–ª–æ–∂–µ–Ω–∏—è —à—Ç–æ—Ä—ã –ø–æ –≥–µ—Ä–∫–æ–Ω—É –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- **–§–∏–∑–∏—á–µ—Å–∫–∞—è –∫–Ω–æ–ø–∫–∞**: –ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è (–æ—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ, —Å—Ç–æ–ø, —Å–æ–Ω, —Å–ø—Ä–∞–≤–∫–∞, –æ–±—É—á–µ–Ω–∏–µ).
- **–ò–ö-–ø—É–ª—å—Ç**: –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –ª—é–±–æ–π –∫–æ–¥ –Ω–∞ –ª—é–±–æ–º –ò–ö-–ø—É–ª—å—Ç–µ.
- **Home Assistant**: –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å —á–µ—Ä–µ–∑ API (–æ—Ç–∫—Ä—ã—Ç–∏–µ, –∑–∞–∫—Ä—ã—Ç–∏–µ, –ø–æ–∑–∏—Ü–∏—è).
- **–Ø–Ω–¥–µ–∫—Å (–ê–ª–∏—Å–∞)**: –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ Home Assistant (–æ—Ç–∫—Ä—ã—Ç–∏–µ, –∑–∞–∫—Ä—ã—Ç–∏–µ, –ø–æ–∑–∏—Ü–∏—è).
- **web —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: –£–¥–∞–ª–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑ –ª—é–±–æ–≥–æ –º–µ—Å—Ç–∞ —á–µ—Ä–µ–∑ –ª—é–±–æ–π –±—Ä–∞—É–∑–µ—Ä –ø–æ ip –∞–¥—Ä–µ—Å—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.
- **–û–±—É—á–µ–Ω–∏–µ**: –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∫–æ–Ω–µ—á–Ω—ã—Ö —Ç–æ—á–µ–∫ —à—Ç–æ—Ä—ã (–æ—Ç–∫—Ä—ã—Ç–æ/–∑–∞–∫—Ä—ã—Ç–æ).

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–ü—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–æ–∫–∞ (INA226) –∏ —Ç–∞–π–º-–∞—É—Ç–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ–≥—Ä–µ–≤–∞.
- **–ì–µ—Ä–∫–æ–Ω**: –î–∞—Ç—á–∏–∫ –ø–æ–ª–æ–∂–µ–Ω–∏—è (–¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏).
- **RTC DS1307**: –¢–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –¥–∞–∂–µ –±–µ–∑ Wi-Fi.
- **OLED-–¥–∏—Å–ø–ª–µ–π**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ, –±–∞—Ç–∞—Ä–µ–µ, –≤—Ä–µ–º–µ–Ω–∏ –¥–æ —Å–Ω–∞ –∏ –ø—Ä–∏—á–∏–Ω–∞—Ö –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è.
- **–ñ—É—Ä–Ω–∞–ª –∑–∞–≥—Ä—É–∑–æ–∫**: –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∏—á–∏–Ω –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è (—Ç–∞–π–º–µ—Ä, –∫–Ω–æ–ø–∫–∞ –∏ —Ç.–¥.).
- **–ò–Ω—Ñ–æ –æ ESP**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ ESP (–ø—Ä–∏—á–∏–Ω–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏, —Å–≤–æ–±–æ–¥–Ω–∞—è –ø–∞–º—è—Ç—å –∏ —Ç.–¥.).

### –≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ
- –ë–∞—Ç–∞—Ä–µ–π–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ (18650) —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è.
- Deep Sleep —Å –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ–º –ø–æ —Ç–∞–π–º–µ—Ä—É –∏–ª–∏ GPIO.
- Wi-Fi –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–∞–ª–∏—Ç—å LED –ø–∏—Ç–∞–Ω–∏—è —Å –º–æ–¥—É–ª—è ESP32C3
  
---

## üõ† –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –ê–ø–ø–∞—Ä–∞—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **–ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**: ESP32-C3 (–Ω–∏–∑–∫–æ–µ —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ, Wi-Fi/BLE).
- **–®–∞–≥–æ–≤—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å**: 28BYJ-48 5–≤ –≤ —Ä–µ–∂–∏–º–µ –±–∏–ø–æ–ª—è—Ä–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞—Ä—è–¥–∞**: TP4056 -–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞—Ä—è–¥–∞ —Å –∑–∞—â–∏—Ç–æ–π.
- **–î—Ä–∞–π–≤–µ—Ä –¥–≤–∏–≥–∞—Ç–µ–ª—è**: –¥—Ä–∞–π–≤–µ—Ä A4988 (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º, —à–∞–≥–æ–º, —Å–Ω–æ–º.
- **–î–∏—Å–ø–ª–µ–π**: OLED SSD1306 I2C (128x64, –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞).
- **–°–µ–Ω—Å–æ—Ä—ã**:
  - INA226(INA219): –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–æ–∫–∞ –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –º–æ—Ç–æ—Ä–∞.
  - ADC: –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –±–∞—Ç–∞—Ä–µ–∏.
  - DS1307: RTC –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏–∑ Home Assistant.
- **–ü–∏—Ç–∞–Ω–∏–µ**: –ë–∞—Ç–∞—Ä–µ—è 18650 (3.7V) —Å DC-DC –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∑–∞—Ä—è–¥–∫–∏ —á–µ—Ä–µ–∑ USB-C
- **DC-DC 3,7->8-12–≤**: –ü–æ–≤—ã—à–∞—é—â–∏–π —Ä–µ–≥—É–ª—è—Ç–æ—Ä –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è.
- **DC-DC 3.3–≤**: –ü–æ–Ω–∏–∂–∞—é—â–∏–π –ª–∏–Ω–µ–π–Ω—ã–π —Ä–µ–≥—É–ª—è—Ç–æ—Ä –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è HT7333.
- **–ú–æ—Å—Ñ–µ—Ç—ã**: –ú–æ—Å—Ñ–µ—Ç—ã —Å –æ–±–≤—è–∑–∫–æ–π —Å–æ–≥–ª–∞—Å–Ω–æ –≤—Ö–µ–º—ã.
- **–°–æ–ª–Ω–µ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å**: –°–æ–ª–Ω–µ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å 5,5-6–≤ —Å —Ç–æ–∫–æ–º –∑–∞—Ä—è–¥–∫–∏ –æ—Ç 10–º–ê.
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –ò–ö-–ø—Ä–∏–µ–º–Ω–∏–∫, –∫–Ω–æ–ø–∫–∞, –ò–ö-–ø—É–ª—å—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).

### –°—Ö–µ–º–∞ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–π (GPIO ESP32-C3)
- GPIO0: –ö–Ω–æ–ø–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Å pull-up, –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è).
- GPIO1: ADC –¥–ª—è –±–∞—Ç–∞—Ä–µ–∏.
- GPIO3: –®–∞–≥ (step) –¥–ª—è A4988.
- GPIO4: –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (dir) –¥–ª—è A4988 (–∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ).
- GPIO2: –°–æ–Ω (sleep) –¥–ª—è A4988.
- GPIO5: –ü–∏—Ç–∞–Ω–∏–µ –º–æ—Ç–æ—Ä–∞ (GPIO switch).
- GPIO6: –ì–µ—Ä–∫–æ–Ω (pull-up, –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π).
- GPIO7: –ü–∏—Ç–∞–Ω–∏–µ –¥–∏—Å–ø–ª–µ—è (GPIO switch).
- GPIO8: LED (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
- GPIO9: SDA I2C.
- GPIO10: SCL I2C.

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **ESPHome**: –í–µ—Ä—Å–∏—è 2024+ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–ª—É–±–æ–∫–æ–≥–æ —Å–Ω–∞ –∏ —Å–µ–Ω—Å–æ—Ä–æ–≤).
- **Home Assistant**: –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (MQTT, API).
- **–®—Ä–∏—Ñ—Ç**: Arial.ttf (–¥–ª—è –¥–∏—Å–ø–ª–µ—è, –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ ESPHome).

---

## üìã –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- –°–æ–±–µ—Ä–∏—Ç–µ —Å—Ö–µ–º—É –ø–æ GPIO –≤—ã—à–µ, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω—É—é —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫—É—é —Å—Ö–µ–º—É 
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ESPHome –Ω–∞ ESP32-C3 (—á–µ—Ä–µ–∑ USB –∏–ª–∏ OTA).
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –±–∞—Ç–∞—Ä–µ—é –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ.

### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/your-username/roller-blind.git
cd roller-blind
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ESPHome
- –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `roller-blind.yaml` –≤ VS Code —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º ESPHome –∏–ª–∏ –≤ ESPHome Builder.
- –ò–∑–º–µ–Ω–∏—Ç–µ substitutions –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ –ø–æ–¥ –≤–∞—à—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
  ```yaml
  substitutions:
    name: smart-roller-blind
    friendly_name: Smart Roller Blind
    friendly_name_short: smart_roller_blind
    version: "05.10.2025"
    device_ip: 192.168.x.x  # –í–∞—à IP
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (GPIO, —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ —Ç.–¥.)
  ```
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω—É–∂–Ω—ã–µ include –ø–∞–ø–∫–∏ (–∏ —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å) –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∞–∑–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è ESPhome –ø—Ä–æ–µ–∫—Ç–∞.
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ —à—Ä–∏—Ñ—Ç `arial.ttf` –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ (–∏ —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å).

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Home Assistant
- –î–æ–±–∞–≤—å—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ HA —á–µ—Ä–µ–∑ MQTT discovery.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ entities: cover, sensors, switches, buttons.
- –ü—Ä–∏–º–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏: "–û—Ç–∫—Ä—ã—Ç—å —à—Ç–æ—Ä—É –Ω–∞ —Ä–∞—Å—Å–≤–µ—Ç–µ".

### 5. –û–±—É—á–µ–Ω–∏–µ –®—Ç–æ—Ä—ã
- –í–∫–ª—é—á–∏—Ç–µ —Ä–µ–∂–∏–º –æ–±—É—á–µ–Ω–∏—è (–¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ 6-10 —Å–µ–∫).
- –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –Ω–∞ –¥–∏—Å–ø–ª–µ–µ: –∑–∞–∫—Ä–æ–π—Ç–µ —à—Ç–æ—Ä—É, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤ –Ω–∏–∂–Ω–µ–π —Ç–æ—á–∫–µ, –∑–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ –∏ –Ω–∞–∂–º–∏—Ç–µ –≤ –≤–µ—Ä—Ö–Ω–µ–π.

---

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ß–µ—Ä–µ–∑ –ö–Ω–æ–ø–∫—É (GPIO0)
- **1 –Ω–∞–∂–∞—Ç–∏–µ**: –û—Ç–∫—Ä—ã—Ç—å/–ó–∞–∫—Ä—ã—Ç—å/–°—Ç–æ–ø (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è).
- **2 –Ω–∞–∂–∞—Ç–∏—è**: –í–∫–ª/–í—ã–∫–ª —Ä–µ–∂–∏–º —Å–æ–Ω.
- **3 –Ω–∞–∂–∞—Ç–∏—è**: –°–ø—Ä–∞–≤–∫–∞ (—ç–∫—Ä–∞–Ω info).
- **4 –Ω–∞–∂–∞—Ç–∏—è**: –≠–∫—Ä–∞–Ω –æ–±—É—á–µ–Ω–∏—è.
- **5 –Ω–∞–∂–∞—Ç–∏–π**: –í–∫–ª/–í—ã–∫–ª Wi-Fi.
- **6 –Ω–∞–∂–∞—Ç–∏–π**: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–∏—Å–ø–ª–µ—è.
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ–µ (3-5 —Å–µ–∫) –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ**: –ü–µ—Ä–µ–∫–ª—é—á–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –∞–≤—Ç–æ/—Ä—É—á–Ω–æ–π.
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ–µ (3-5 —Å–µ–∫) –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∞–≤–∞—Ä–∏–∏**: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞.
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ–µ (6-10 —Å–µ–∫)**: –í—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º –æ–±—É—á–µ–Ω–∏—è.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ß–µ—Ä–µ–∑ –ò–ö-–ü—É–ª—å—Ç
- **xxx**: –æ–±—É—á–∏—Ç—å –ø–æ –ª–æ–≥–∞–º.
- **–ö–Ω–æ–ø–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è**: –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ò–ö-–¥–∞—Ç—á–∏–∫–∞, –µ—Å–ª–∏ –æ–Ω –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —á—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç –¥–æ 50% –≤ —Ä–µ–∂–∏–º–µ —Å–Ω–∞.

### –î–∏—Å–ø–ª–µ–π (–°—Ç—Ä–∞–Ω–∏—Ü—ã)
- **main_page**: –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–∞—Ç—É—Å (–≤—Ä–µ–º—è, –ø–æ–∑–∏—Ü–∏—è, –±–∞—Ç–∞—Ä–µ—è, —Å–æ–Ω).
- **learning**: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –æ–±—É—á–µ–Ω–∏—é.
- **info**: –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–∞–º.
- **start_learning/open_setting/close_setting**: –®–∞–≥–∏ –æ–±—É—á–µ–Ω–∏—è.
- **finish**: –£—Å–ø–µ—Ö –æ–±—É—á–µ–Ω–∏—è.
- **sleeping**: –≠–∫—Ä–∞–Ω —Å–Ω–∞.
- **safety_alarm**: –ê–≤–∞—Ä–∏—è (–ø–µ—Ä–µ–≥—Ä–µ–≤/—Ç–∞–π–º-–∞—É—Ç).

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Home Assistant
- **Sunrise/Sunset Offset**: –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —É–≥–ª–∞ —Å–æ–ª–Ω—Ü–∞.
- **Brightness**: –Ø—Ä–∫–æ—Å—Ç—å –¥–∏—Å–ø–ª–µ—è.
- **Stepper Speed**: –°–∫–æ—Ä–æ—Å—Ç—å –º–æ—Ç–æ—Ä–∞.
- **Max Current/Timeout**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.
- **COVER**: –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏.
- **–î—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: –ü—Ä–æ—á–∏–µ –º–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

---

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### Substitutions
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –Ω–∞—á–∞–ª–µ YAML:
- `pin_a/pin_b/pin_c`: GPIO –¥–ª—è A4988.
- `max_speed/run_duration`: –°–∫–æ—Ä–æ—Å—Ç—å –∏ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã.
- `device_ip`: IP-–∞–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- `endstop`: –ö–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞ (–∫–∞–ª–∏–±—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏).
- `wifi_enabled`: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Wi-Fi.
- `sun_time`: –†–µ–∂–∏–º —Å–æ–ª–Ω—Ü–µ/–≤—Ä–µ–º—è.
- –ü—Ä–æ—á–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

### –õ–æ–≥–∏ –∏ –û—Ç–ª–∞–¥–∫–∞
- –í–∫–ª—é—á–∏—Ç–µ `logger: debug` –¥–ª—è –ª–æ–≥–æ–≤.
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ ESPHome logs –∏–ª–∏ HA.

### –≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ
- Deep Sleep –¥–ª–∏—Ç—Å—è –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–±—ã—Ç–∏—è (–≤–æ—Å—Ö–æ–¥/–∑–∞–∫–∞—Ç –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –≤—Ä–µ–º—è). –ë–µ–∑ –ø–æ–¥–∑–∞—Ä—è–¥–∫–∏ (—Å–æ–ª–Ω–µ—á–Ω–∞—è –±–∞—Ç–∞—Ä–µ—è –∏–ª–∏ USB-C) —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ 2 –º–µ—Å—è—Ü–µ–≤

---

## üìä –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏ –í–∏–¥–µ–æ

- [yaml —Ñ–∞–π–ª –ø—Ä–æ—à–∏–≤–∫–∏](smart-roller-blind.yaml)
- [–≤–Ω–µ—à–Ω–∏–π –≤–∏–¥](roller-blind-img/roller-blind-v2_1.jpg)
- [–≤–Ω–µ—à–Ω–∏–π –≤–∏–¥](roller-blind-img/roller-blind-v2_1.jpg)
- [–í–∏–¥ –Ω–∞ –æ–∫–Ω–µ](roller-blind-img/window.jpg)
- [–°—Ö–µ–º–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π](roller-blind-img/smart-roller-blind-shema.jpg)
- [–í–∏–¥–µ–æ#1 YOUTUBE](https://youtu.be/TDQovWRaWWA)
- [–í–∏–¥–µ–æ#2 YOUTUBE](https://youtu.be/KZsbmizrDjA)
- [–§–∞–π–ª—ã –¥–ª—è –ø–µ—á–∞—Ç–∏](roller-blind-3d)

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã

- **–®—Ç–æ—Ä–∞ –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ –º–æ—Ç–æ—Ä–∞ (GPIO5) –∏ –∫–∞–ª–∏–±—Ä–æ–≤–∫—É.
- **–ù–µ—Ç –≤—Ä–µ–º–µ–Ω–∏**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ RTC —á–µ—Ä–µ–∑ HA –∏–ª–∏ Wi-Fi.
- **–ê–≤–∞—Ä–∏—è**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫ (INA226) –∏ —Ç–∞–π–º-–∞—É—Ç—ã.
- **Wi-Fi –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `wifi.yaml`.

–î–ª—è –ø–æ–º–æ—â–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫.

---

##  –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

–¢–µ–ª–µ–≥—Ä–∞–º –∫–∞–Ω–∞–ª https://t.me/parus_smart

---
## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- ESPHome —Å–æ–æ–±—â–µ—Å—Ç–≤—É –∑–∞ –æ—Ç–ª–∏—á–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫.
- Home Assistant –∑–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é.
- –í–∞–º –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ! –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –ø–æ–ª–µ–∑–µ–Ω, –ø–æ—Å—Ç–∞–≤—å—Ç–µ ‚≠ê –Ω–∞ GitHub.

---

*–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è ParusSmartHome. –í–µ—Ä—Å–∏—è: 05.10.2025*
